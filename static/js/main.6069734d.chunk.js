(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[0],{113:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"g",(function(){return d}));n(63);var r=n(26),a=n(45),u=n(0),c=function(t){if(!t)return{};var e=Object(a.a)({},t);return Object.keys(e).forEach((function(t){(function(t){return void 0===t||null===t||""===t})(e[t])&&delete e[t]})),e},o=function(t){Object(u.useEffect)((function(){t()}),[t])},i=function(t,e){var n=Object(u.useState)(t),a=Object(r.a)(n,2),c=a[0],o=a[1];return Object(u.useEffect)((function(){var n=setTimeout((function(){return o(t)}),e);return function(){return clearTimeout(n)}}),[t,e]),c},s=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(u.useRef)(document.title).current;Object(u.useEffect)((function(){document.title=t}),[t]),Object(u.useEffect)((function(){return function(){e||(document.title=n)}}),[e,n])},l=function(){return window.location.href=window.location.origin},f=function(t,e){var n=Object.entries(t).filter((function(t){var n=Object(r.a)(t,1)[0];return e.includes(n)}));return Object.fromEntries(n)},d=function(){var t=Object(u.useRef)(!1);return Object(u.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),t}},175:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return v}));var r=n(18),a=n.n(r),u=n(45),c=n(114),o=n(51),i=n(227),s=n.n(i),l=n(79),f=n(84),d=n(0),b=["data","token","headers"],p="https://online.com",m=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,i,f,d,m=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},r=n.data,i=n.token,n.headers,f=Object(c.a)(n,b),"GET"===(d=Object(u.a)({method:"GET",headers:{Authorization:i?"Bearer ".concat(i):"","Content-Type":r?"application/json":""}},f)).method.toUpperCase()?e+="?".concat(s.a.stringify(r)):d.body=JSON.stringify(r||{}),t.abrupt("return",window.fetch("".concat(p,"/").concat(e),d).then(function(){var t=Object(o.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==e.status){t.next=5;break}return t.next=3,l.c();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"}));case 5:return t.next=7,e.json();case 7:if(n=t.sent,!e.ok){t.next=12;break}return t.abrupt("return",n);case 12:return t.abrupt("return",Promise.reject(n));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(f.b)().user;return Object(d.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0],c=n[1];return m(a,Object(u.a)(Object(u.a)({},c),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},178:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(26),a=n(45),u=n(0),c=n(113),o={stat:"idle",data:null,error:null},i={throwOnError:!1},s=function(t,e){var n=Object(a.a)(Object(a.a)({},i),e),s=Object(u.useReducer)((function(t,e){return Object(a.a)(Object(a.a)({},t),e)}),Object(a.a)(Object(a.a)({},o),t)),l=Object(r.a)(s,2),f=l[0],d=function(t){var e=Object(c.g)();return Object(u.useCallback)((function(){return e.current?t.apply(void 0,arguments):void 0}),[t,e])}(l[1]),b=Object(u.useState)((function(){return function(){}})),p=Object(r.a)(b,2),m=p[0],v=p[1],h=Object(u.useCallback)((function(t){return d({data:t,stat:"success",error:null})}),[d]),j=Object(u.useCallback)((function(t){return d({error:t,stat:"error",data:null})}),[d]),O=Object(u.useCallback)((function(t,e){if(!t||!t.then)throw new Error("\u8bf7\u4f20\u5165 Promise \u7c7b\u578b\u6570\u636e");return v((function(){return function(){(null===e||void 0===e?void 0:e.retry)&&O(null===e||void 0===e?void 0:e.retry(),e)}})),d({stat:"loading"}),t.then((function(t){return h(t),t})).catch((function(t){return j(t),n.throwOnError?Promise.reject(t):t}))}),[n.throwOnError,h,j,d]);return Object(a.a)({isIdle:"idle"===f.stat,isLoading:"loading"===f.stat,isError:"error"===f.stat,isSuccess:"success"===f.stat,run:O,setData:h,setError:j,retry:m},f)}},179:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(114),a=n(63),u=n(0),c=n.n(u),o=["metadata","phases"],i=[];setInterval((function(){if(i.length){var t=Object(a.a)(i);i=[],console.log(t)}}),5e3);var s=function(t){var e=t.metadata,n=t.phases,a=Object(r.a)(t,o);return c.a.createElement(c.a.Profiler,Object.assign({onRender:function(t,r,a,u,c,o,s){n&&!n.includes(r)||i.push({id:t,phase:r,actualDuration:a,baseDuration:u,startTime:c,commitTime:o,interactions:s,metadata:e})}},a))}},254:function(t,e,n){},264:function(t,e){},411:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),u=n(30),c=n.n(u),o=(n(254),n(84)),i=n(131),s=n(234),l=n(132),f=n(150),d=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(t=e.call.apply(e,[this].concat(a))).state={error:null},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.state.error,e=this.props,n=e.fallbackRender,r=e.children;return t?n({error:t}):r}}],[{key:"getDerivedStateFromError",value:function(t){return{error:t}}}]),n}(a.a.Component),b=n(83),p=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,441))})),m=a.a.lazy((function(){return n.e(4).then(n.bind(null,444))}));var v=function(){var t=Object(o.b)().user;return a.a.createElement("div",{className:"App"},a.a.createElement(d,{fallbackRender:b.c},a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(b.d,null)},t?a.a.createElement(p,null):a.a.createElement(m,null))))},h=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,439)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,u=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),u(t),c(t)}))},j=n(111),O=(n(410),n(99)),g=n(176),E=function(t){var e=t.children,n=new O.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return a.a.createElement(O.QueryClientProvider,{client:n},a.a.createElement(g.a,null,a.a.createElement(o.a,null,e)))},w=n(179);Object(j.b)((function(){return c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w.a,{id:"Root App",phases:["mount"]},a.a.createElement(E,null,a.a.createElement(j.a,null),a.a.createElement(v,null)))),document.getElementById("root"))})),h()},79:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return d}));var r=n(18),a=n.n(r),u=n(51),c="https://online.com",o="__auth_provider_token__",i=function(){return window.localStorage.getItem(o)},s=function(t){var e=t.user;return window.localStorage.setItem(o,e.token||""),e},l=function(t){return fetch("".concat(c,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(u.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=8;break}return t.t0=s,t.next=4,e.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,e.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},f=function(t){return fetch("".concat(c,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(u.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=8;break}return t.t0=s,t.next=4,e.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,e.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},d=function(){var t=Object(u.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(o));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},83:function(t,e,n){"use strict";n.d(e,"e",(function(){return m})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return j})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return g})),n.d(e,"f",(function(){return E}));var r,a,u,c,o=n(97),i=n(98),s=n(0),l=n.n(s),f=n(171),d=n(414),b=n(155),p=n(111),m=i.a.div(r||(r=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),v=i.a.div(a||(a=Object(o.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),h=function(){return l.a.createElement(v,null,l.a.createElement(f.a,{size:"large"}))},j=function(t){var e=t.error;return l.a.createElement(v,null,l.a.createElement(p.a,null),l.a.createElement(O,{error:e}))},O=function(t){var e,n=t.error;return(null===(e=n)||void 0===e?void 0:e.message)?l.a.createElement(d.a.Text,{type:"danger"},null===n||void 0===n?void 0:n.message):null},g=Object(i.a)(b.a)(u||(u=Object(o.a)(["\n  padding: 0;\n"]))),E=i.a.div(c||(c=Object(o.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"])))},84:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return h}));var r=n(18),a=n.n(r),u=n(51),c=n(0),o=n.n(c),i=n(79),s=n(175),l=n(113),f=n(178),d=n(83),b=n(99),p=function(){var t=Object(u.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,!(n=i.a())){t.next=7;break}return t.next=5,Object(s.a)("me",{token:n});case 5:r=t.sent,e=r.user;case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=o.a.createContext(void 0);m.displayName="AuthContext";var v=function(t){var e=t.children,n=Object(f.a)(),r=n.data,a=n.error,u=n.isLoading,s=n.isIdle,v=n.isError,h=n.run,j=n.setData,O=Object(b.useQueryClient)();return Object(l.f)(Object(c.useCallback)((function(){h(p())}),[])),s||u?o.a.createElement(d.d,null):v?o.a.createElement(d.c,{error:a}):o.a.createElement(m.Provider,{children:e,value:{user:r,login:function(t){return i.b(t).then(j)},register:function(t){return i.d(t).then(j)},logout:function(){return i.c().then((function(){j(null),O.clear()}))}}})},h=function(){var t=o.a.useContext(m);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}}},[[411,1,2]]]);
//# sourceMappingURL=main.6069734d.chunk.js.map